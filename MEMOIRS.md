# Memoirs

프로젝트를 개발하면서 느꼈던 어려운 점과 부족한 점을 공유한다.

## 새로 도입한 부분

### Automic Design

이번 프로젝트는 컴포넌트 디자인 패턴으로 `Automic Design`을 채택했다. 디자인 패턴을 단 한번도 사용해본 적이 없었지만 그럼에도 불구하고 Automic Design을 사용하기로 마음먹은 것은 예전에 React를 사용하여 프로젝트를 개발하면서 생긴 문제점을 해결하고 싶은 마음 때문이었다. 그 문제점 중 가장 불편했던 것 중에 하나는 컴포넌트의 내용이 조금만 달라지면 새로운 컴포넌트를 작성해야 했다는 점이었다. 같은 버튼을 만든다고 해도 버튼의 용도 그리고 버튼 텍스트가 달라지기만 해도 새로운 버튼 컴포넌트를 작성해야 하는 것이 시간을 낭비하는 원인 중 하나라고 생각되었다. 예전에 이것을 해결하지 못해서 이름만 다른 똑같은 컴포넌트를 여러개 import 하는 상황이 발생하게 되었다. 그러다보니 컴포넌트를 렌더링하는 코드 부분만 해도 길이가 길어지게 되었으며 다음 프로젝트를 하게 될 때는 이것을 해결해보고자 하는 마음이 크게 작용한 것 같다. 따라서 이 부분을 어떻게 해결할 수 있을까 검색을 하던 와중에 재사용 컴포넌트를 만드는 방법을 보게 되았고 더 나아가 이것을 효율적으로 이용할 수 있는 방법으로 Automic Design을 찾게 된 것이다.

Automic Design은 atoms | molecules | organisms | templates | pages로 총 5개의 구성요소를 가지며 컴포넌트를 작은부분으로 잘게 쪼개어 다시 재사용할 수 있게 하는 것이 핵심입니다. Tsufia 프로젝트에서는 가장 기본이 되는 요소(Heading, Span, Link, Button... 등)로 atom으로 바라보았으며 atom이 여러 개 모인 집단 (ButtonList, UnorderedList... 등)을 molecules로 구성하였습니다. atoms | molecules는 언제나 재사용될 것을 염두하여 props와 styled component를 활용해 스타일을 재구성하며 어떠한 로직도 포함하고 있지 않습니다. organisms에서는 재사용 가능한 atoms | molecules의 집합으로 구성되어 실제로 사용될 수 있는 컴포넌트를 구성합니다. templates에서는 prop을 받아 레이아웃을 담당하는 형태만을 가집니다. 마지막으로 pages에서는 실제 페이지를 담당하는 컴포넌트를 의미하며 페이지는 Container, Presenter로 구성되어 있습니다. Container에서는 페이지가 가지고 있는 모든 로직들을 가지고 있으며 해당 로직들은 Context에, 그리고 페이지 전역에서 사용하게 되는 상태들은 Redux에 담겨 추후에 어느곳에서든지 사용 가능합니다. Presenter에서는 페이지를 구성하게 되는 실질적인 컴포넌트를 해당 templates에 props를 제공하게 됩니다. 즉, atoms -> molecules -> organisms -> templates -> pages 순으로 컴포넌트가 구성되어 사용자에게 UI가 제공되는 것 입니다. 이러한 구조를 가지는 Automic Design을 사용하게 되면서 좋았던 점은 컴포넌트가 어느 부분에 속하는지만 봐도 구분된 역할이 명확해진다는 것과 한번 만든 재사용 컴포넌트는 다음에 다른 부분에서 활용되어 굉장히 편하다는 장점이 있었습니다. 하지만 Automic Design 역시 좋은 점만 가지고 있었던 것은 아니었고 여러가지 단점도 존재했다. 단점은 아래에서 설명하도록 하겠습니다.

### Redux with Typescript

프로젝트에서 Automic Design을 사용할 때 생기게 되는 불편한 점은 props를 내려주는 것에 관련된 부분이라고 생각됩니다. Automic Design은 큰 컴포넌트를 잘게 쪼개는 것이 핵심이기 때문에 하나의 상태를 하위 컴포넌트로 전달하더라도 여러번을 거쳐야 하기 때문에 기능을 수정하는 일이 발생할 시, props를 일일이 수정해야 되므로 많은 시간을 소요하게 될 수도 있다는 점 입니다. 이 부분을 해결하기 위해서 Redux의 도움을 받기로 하였으며 이왕 사용하는 거 Type의 도움을 받을 수 있도록 `typesafe-actions`패키지를 설치하여 적절히 활용하였습니다. 상태를 Redux로 관리하게 되면서 로직에 관한 부분은 page의 container 컴포넌트에 모아서 작성할 수 있게 되었으며 추후에 useSelector메서드를 사용해 상태를 어느 컴포넌트에서든지 사용할 수 있게 되었습니다. 또한 Redux Devtools를 연동하여 사용하면서 테스트할 때 dispatch가 몇번 이루어지는지 어디까지 상태가 저장이 되었는지 확인할 수 있어 매우 편리하게 개발할 수 있었습니다. 누군가 Automic Design을 사용하고 싶다면 꼭 Redux를 사용하길 권할 정도로 좋은 경험을 한 것 같습니다.
